function NgImageLoad(a){"use strict";var b="ngImageLoad";return a.module(b,[]).run(["NgImageLoadService",function(a){a.load()}]).directive("ngImageLoad",["NgImageLoadService",ngImageLoadDirective]).provider("NgImageLoadService",NgImageLoadServiceProvider),b}function ngImageLoadDirective(a){return{restrict:"A",scope:{ngImageLoad:"@",defaultImageKey:"@",defaultImageUrl:"@"},link:function(b,c,d){function g(){var c;c=b.defaultImageUrl?a.loadImage(b.defaultImageUrl):b.defaultImageKey?a.getImageByKey(b.defaultImageKey):a.getDefaultImage(),c.then(function(a){a?e||i(a):console.error("No default image provided")},function(a){console.error(a)})}function h(b){a.loadImage(b).then(function(a){e=!0,i(a)},function(a){console.error(a)})}function i(a){c.attr("src",a)}var e=!1;g();var f=b.ngImageLoad;f&&h(f)}}}function NgImageLoadServiceProvider(){function c(b){a.url=b}function d(a){b.push(a)}function e(a){for(var b=0;b<a.length;b++)d(a[b])}function f(c){function d(){a.url&&(a.promise=e(a.url));for(var c=0;c<b.length;c++)b[c].promise=e(b[c].url)}function e(a){var b=c.defer();if(a){var d=new Image;d.addEventListener("load",function(){b.resolve(a)}),d.addEventListener("error",function(a){b.reject(a)}),d.src=a}else b.reject("parameter 'url' not provided");return b.promise}function f(a){for(var b=[],c=0;c<a.length;c++)b.push(e(a[c]));return b}function g(a){var d=c.defer(),e=!1;if(a){for(var f=0;f<b.length;f++)if(b[f].hasOwnProperty("key")&&b[f].key===a){e=!0,b[f].promise.then(d.resolve,d.reject);break}e===!1&&d.reject("no image exist with key '"+a+"'")}else d.reject("parameter 'key' not provided");return d.promise}function h(a){for(var b=[],c=0;c<a.length;c++)b.push(g(a[c]));return b}function i(){var b=c.defer();return a.promise?a.promise.then(b.resolve,b.reject):b.reject("default image url not provided"),b.promise}return{load:d,loadImage:e,loadImages:f,getImageByKey:g,getImagesByKey:h,getDefaultImage:i}}var a={url:"",promise:null},b=[];return{$get:["$q",f],setDefault:c,preloadImage:d,preloadImages:e}}!function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["angular"],b);else{if("undefined"==typeof module||"object"!=typeof module.exports)return b(a.angular);module.exports=b(require("angular"))}}(this,NgImageLoad);